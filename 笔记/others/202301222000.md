#pipenv

[`pipenv`](https://github.com/pypa/pipenv)是[Python官方推荐](https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies)的包管理工具。可以说，它集成了`virtualenv`, `pip`和`pyenv`三者的功能。其目的旨在集合了所有的包管理工具的长处，如: `npm`, `yarn`, `composer`等的优点。

它能够自动为项目创建和管理虚拟环境，从`Pipfile`文件添加或删除安装的包，同时生成`Pipfile.lock`来锁定安装包的版本和依赖信息，避免构建错误。

`pipenv`主要解决了如下问题:

-   不用再单独使用`pip`和`virtualenv`, 现在它们合并在一起了
-   不用再维护`requirements.txt`, 使用`Pipfile`和`Pipfile.lock`来代替
-   可以使用多个python版本(`python2`和`python3`)
-   在安装了`pyenv`的条件下，可以自动安装需要的Python版本

## 安装[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#安装)

为了方便使用, 建议**全局**安装

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pip install pipenv
</code></pre></td></tr></tbody></table>

## 基本概念[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#基本概念)

-   虚拟环境如果不存在的话，会自动创建
-   当`install`命令没有传递参数指定安装包时，所有`[packages]`里指定的包都会被安装
-   `pipenv --three`可以初始化一个`python3`版本的虚拟环境
-   `pipenv --two`可以初始化一个`python2`版本的虚拟环境

## 添加shell补齐[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#添加shell补齐)

如果使用的是`bash`, 可添加下面语句到`.bashrc`或`.bash_profile`

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">eval <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"</span><span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">$(</span>pipenv --completion<span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">)</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"</span>
</code></pre></td></tr></tbody></table>

## pipenv命令[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#pipenv命令)

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">17
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">18
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">19
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">20
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">21
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">22
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">23
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">24
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">25
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">26
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">27
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">28
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">29
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">30
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">31
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">32
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">33
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">34
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">35
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">36
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">37
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">38
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">39
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">40
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">41
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">42
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">43
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">44
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">45
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">46
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">47
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">48
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">49
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">50
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">51
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">52
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">53
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pipenv
Usage: pipenv <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">[</span>OPTIONS<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">]</span> COMMAND <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">[</span>ARGS<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">]</span>...

Options:
  --update         Update Pipenv &amp; pip to latest.     <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 更新pipenv和pip到最新版本</span>
  --where          Output project home information.   <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 获取项目路径</span>
  --venv           Output virtualenv information.     <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 获取虚拟环境的路径</span>
  --py             Output Python interpreter information. <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 获取python解释器的路径</span>
  --envs           Output Environment Variable options. <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 输出当前的环境变量</span>
  --rm             Remove the virtualenv.   <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 删除虚拟环境</span>
  --bare           Minimal output.
  --completion     Output completion <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>to be eval<span style="color: rgb(150, 0, 80); background-color: rgb(30, 0, 16); --darkreader-inline-color:#ff60bb; --darkreader-inline-bgcolor:#0e0002;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">'</span>d<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>.
  --man            Display manpage.
  --three / --two  Use Python 3/2 when creating virtualenv. <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 使用python3/2创建虚拟环境</span>
  --python TEXT    Specify which version of Python virtualenv should use. <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 指定python的版本信息</span>
  --site-packages  Enable site-packages <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> the virtualenv.
  --jumbotron      An easter egg, effectively.
  --version        Show the version and exit.
  -h, --help       Show this message and exit.

Usage Examples:
   Create a new project using Python 3.6, specifically:
   $ pipenv --python 3.6

   Install all dependencies <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> a project <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>including dev<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>:
   $ pipenv install --dev

   Create a lockfile containing pre-releases:
   $ pipenv lock --pre

   Show a graph of your installed dependencies:
   $ pipenv graph

   Check your installed dependencies <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> security vulnerabilities:
   $ pipenv check

   Install a local setup.py into your virtual environment/Pipfile:
   $ pipenv install -e .

Commands:
  check      Checks <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> security vulnerabilities and against PEP <span style="color: rgb(174, 129, 255); --darkreader-inline-color:#aa73ff;" data-darkreader-inline-color="">508</span> markers
             provided in Pipfile.
  graph      Displays currently–installed dependency graph information.
  install    Installs provided packages and adds them to Pipfile, or <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span><span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">if</span> none
             is given<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>, installs all packages.
  lock       Generates Pipfile.lock.
  open       View a given module in your editor.
  run        Spawns a command installed into the virtualenv.
  shell      Spawns a shell within the virtualenv.
  uninstall  Un-installs a provided package and removes it from Pipfile.
  update     Uninstalls all packages, and re-installs package<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>s<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span> in <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">[</span>packages<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">]</span>
             to latest compatible versions.

</code></pre></td></tr></tbody></table>

## 常用命令介绍[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#常用命令介绍)

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">17
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash"><span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 安装包</span>
$ pipenv install

<span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 激活当前项目的虚拟环境</span>
$ pipenv shell

<span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 安装开发依赖包</span>
$ pipenv install pytest --dev

<span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 图形显示包依赖关系</span>
$ pipenv graph

<span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 生成lockfile</span>
$ pipenv lock

<span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 删除所有的安装包</span>
$ pipenv uninstall --all
</code></pre></td></tr></tbody></table>

## 高级技巧[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#高级技巧)

### 导入`requirements.txt`[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#导入requirementstxt)

当在执行`pipenv install`命令的时候，如果有一个`requirements.txt`文件，那么会自动从`requirements.txt`文件导入安装包信息并创建一个`Pipfile`文件。

同样可以使用`$ pipenv install -r path/to/requirements.txt`来导入`requirements.txt`文件

**注意**:

默认情况下，我们都是在`requirements.txt`文件里指定了安装包的版本信息的，在导入`requirements.txt`文件时，版本信息也会被自动写`Pipfile`文件里， 但是这个信息我们一般不需要保存在`Pipfile`文件里，需要手动更新`Pipfile`来删除版本信息

### 指定安装包的版本信息[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#指定安装包的版本信息)

为了安装指定版本的包信息，可以使用:

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pipenv install requests<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">==</span>2.13.0
</code></pre></td></tr></tbody></table>

这个命令也会自动更新`Pipfile`文件

### 指定Python的版本信息[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#指定python的版本信息)

在创建虚拟环境的时候，我们可以指定使用的python版本信息，类似`pyenv`

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">3
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback">$ pipenv --python 3
$ pipenv --python 3.6
$ pipenv --python 2.7.14
</code></pre></td></tr></tbody></table>

`pipenv`会自动扫描系统寻找合适的版本信息，如果找不到的话，同时又安装了`pyenv`, 它会自动调用`pyenv`下载对应的版本的python

### 指定安装包的源[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#指定安装包的源)

如果我们需要在安装包时，从一个源下载一个安装包，然后从另一个源下载另一个安装包，我们可以通过下面的方式配置

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback">[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[[source]]
url = "http://pypi.home.kennethreitz.org/simple"
verify_ssl = false
name = "home"

[dev-packages]

[packages]
requests = {version="*", index="home"}
maya = {version="*", index="pypi"}
records = "*"
</code></pre></td></tr></tbody></table>

如上设置了两个源：

-   `pypi`([https://pypi.python.org/simple](https://pypi.python.org/simple))
-   `home`([http://pypi.home.kennethreitz.org/simple](http://pypi.home.kennethreitz.org/simple))

同时指定`requests`包从`home`源下载，`maya`包从`pypi`源下载

### 生成requirements.txt文件[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#生成requirementstxt文件)

我们也可以从`Pipfile`和`Pipfile.lock`文件来生成`requirements.txt`

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">5
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback"># 生成requirements.txt文件
$ pipenv lock -r

# 生成dev-packages的requirements.txt文件
# pipenv lock -r -d
</code></pre></td></tr></tbody></table>

### 检查安全隐患[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#检查安全隐患)

`pipenv`包含了`safety`模块，可以让我们坚持安装包是否存在安全隐患。

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">17
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">18
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">19
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">20
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">21
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">22
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">23
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">24
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">25
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">26
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">27
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">28
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">29
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">30
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">31
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">32
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">33
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">34
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">35
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">36
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">37
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">38
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ cat Pipfile
<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">[</span>packages<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">]</span>
django <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span> <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"==1.10.1"</span>

$ pipenv check
Checking PEP <span style="color: rgb(174, 129, 255); --darkreader-inline-color:#aa73ff;" data-darkreader-inline-color="">508</span> requirements…
Passed!
Checking installed package safety…

33075: django &gt;<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span>1.10,&lt;1.10.3 resolved <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>1.10.1 installed<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>!
Django before 1.8.x before 1.8.16, 1.9.x before 1.9.11, and 1.10.x before 1.10.3, when settings.DEBUG is True, allow remote attackers to conduct DNS rebinding attacks by leveraging failure to validate the HTTP Host header against settings.ALLOWED_HOSTS.

33076: django &gt;<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span>1.10,&lt;1.10.3 resolved <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>1.10.1 installed<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>!
Django 1.8.x before 1.8.16, 1.9.x before 1.9.11, and 1.10.x before 1.10.3 use a hardcoded password <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> a temporary database user created when running tests with an Oracle database, which makes it easier <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> remote attackers to obtain access to the database server by leveraging failure to manually specify a password in the database settings TEST dictionary.

33300: django &gt;<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span>1.10,&lt;1.10.7 resolved <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>1.10.1 installed<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>!
CVE-2017-7233: Open redirect and possible XSS attack via user-supplied numeric redirect URLs
<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">============================================================================================</span>

Django relies on user input in some cases  <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>e.g.
:func:<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">`</span>django.contrib.auth.views.login<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">`</span> and :doc:<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">`</span>i18n &lt;/topics/i18n/index&gt;<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">`</span><span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>
to redirect the user to an <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"on success"</span> URL. The security check <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> these
redirects <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>namely <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">``</span>django.utils.http.is_safe_url<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">()</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">``</span><span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span> considered some numeric
URLs <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>e.g. <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">``</span>http:999999999<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">``</span><span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span> <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"safe"</span> when they shouldn<span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">'t be.
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">Also, if a developer relies on ``is_safe_url()`` to provide safe redirect
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">targets and puts such a URL into a link, they could suffer from an XSS attack.
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">CVE-2017-7234: Open redirect vulnerability in ``django.views.static.serve()``
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">=============================================================================
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">A maliciously crafted URL to a Django site using the
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">:func:`~django.views.static.serve` view could redirect to any other domain. The
</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">view no longer does any redirects as they don'</span>t provide any known, useful
functionality.

Note, however, that this view has always carried a warning that it is not
hardened <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">for</span> production use and should be used only as a development aid.
</code></pre></td></tr></tbody></table>

### 编码风格检查[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#编码风格检查)

`pipenv`默认集成了`flake8`, 可以用来检测编码风格

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">6
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ cat t.py
import requests

$ pipenv check --style t.py
t.py:1:1: F401 <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">'requests'</span> imported but unused
t.py:1:16: W292 no newline at end of file
</code></pre></td></tr></tbody></table>

### 浏览模块代码[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#浏览模块代码)

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash"><span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 用编辑器打开requests模块</span>
$ pipenv open requests
</code></pre></td></tr></tbody></table>

### 自动加载环境变量.env[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#自动加载环境变量env)

如果项目根目录下有`.env`文件，`$ pipenv shell`和`$ pipenv run`会自动加载它。

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback">$ cat .env
HELLO=WORLD

$ pipenv run python
Loading .env environment variables…
Python 2.7.13 (default, Jul 18 2017, 09:17:00)
[GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.environ['HELLO']
'WORLD'
</code></pre></td></tr></tbody></table>

### 自定义虚拟环境的路径[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#自定义虚拟环境的路径)

默认情况下,`pipenv`使用[`pew`](https://github.com/berdario/pew)来管理虚拟环境的路径，我们可以自定义`WORKON_HOME`环境变量来设置虚拟环境的路径。比如:

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">export WORKON_HOME<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span>~/.venvs
</code></pre></td></tr></tbody></table>

我们也可以通过设置环境变量`PIPENV_VENV_IN_PROJECT`使虚拟环境在每个项目的根目录下`project/.venv`。

### 自动激活虚拟环境[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#自动激活虚拟环境)

配合[virtualenv-autodetect](https://github.com/RobertDeRose/virtualenv-autodetect)和设置`PIPENV_VENV_IN_PROJECT`环境变量可以自动激活虚拟环境。

在`.bashrc`或`.bash_profile`中配置如下

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback">export PIPENV_VENV_IN_PROJECT=1
source /path/to/virtualenv-autodetect.sh
</code></pre></td></tr></tbody></table>

如果使用了`oh-my-zsh`, 可以直接使用它的插件形式

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback"># 安装插件
$ git@github.com:RobertDeRose/virtualenv-autodetect.git ~/.oh-my-zsh/custom/plugins
</code></pre></td></tr></tbody></table>

再修改`.zshrc`文件启动插件

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-fallback" data-lang="fallback"># 找到启动plugins的行添加启用插件
plugins=(... virtualenv-autodetect)
</code></pre></td></tr></tbody></table>

### 通过环境变量配置pipenv[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#通过环境变量配置pipenv)

pipenv内置了很多环境变量，可以通过设置这些环境变量来配置`pipenv`

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">17
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">18
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">19
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">20
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">21
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">22
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">23
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">24
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">25
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">26
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pipenv --envs
The following environment variables can be set, to <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">do</span> various things:

  - PIPENV_MAX_DEPTH
  - PIPENV_SHELL
  - PIPENV_DOTENV_LOCATION
  - PIPENV_HIDE_EMOJIS
  - PIPENV_CACHE_DIR
  - PIPENV_VIRTUALENV
  - PIPENV_MAX_SUBPROCESS
  - PIPENV_COLORBLIND
  - PIPENV_VENV_IN_PROJECT <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 在项目根路径下创建虚拟环境</span>
  - PIPENV_MAX_ROUNDS
  - PIPENV_USE_SYSTEM
  - PIPENV_SHELL_COMPAT
  - PIPENV_USE_HASHES
  - PIPENV_NOSPIN
  - PIPENV_PIPFILE
  - PIPENV_INSTALL_TIMEOUT
  - PIPENV_YES
  - PIPENV_SHELL_FANCY
  - PIPENV_DONT_USE_PYENV
  - PIPENV_DONT_LOAD_ENV
  - PIPENV_DEFAULT_PYTHON_VERSION <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># 设置创建虚拟环境时默认的python版本信息，如: 3.6</span>
  - PIPENV_SKIP_VALIDATION
  - PIPENV_TIMEOUT
</code></pre></td></tr></tbody></table>

需要修改某个默认配置时，只需要把它添加到`.bashrc`或`.bash_profile`文件里即可。

## 常见问题[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#常见问题)

### `pipenv install`时报错`pip.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1`[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#pipenv-install时报错pipexceptionsinstallationerror-command-python-setuppy-egg_info-failed-with-error-code-1)

错误原因是`pipenv`是用python2安装的，解决办法是使用pip3重新安装pipenv

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">2
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pip unintall pipenv
$ pip3 install pipenv
</code></pre></td></tr></tbody></table>

### 在项目目录里运行`pipenv`时报错`AttributeError: module 'enum' has no attribute 'IntFlag'`[](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour//#在项目目录里运行pipenv时报错attributeerror-module-enum-has-no-attribute-intflag)

<table style="border-spacing: 0px; padding: 0px; margin: 0px; border: 0px; width: auto; overflow: auto; display: block; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 1
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 2
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 3
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 4
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 5
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 6
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 7
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 8
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color=""> 9
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">10
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">11
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">12
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">13
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">14
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">15
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">16
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">17
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">18
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">19
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">20
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">21
</span><span style="margin-right: 0.4em; padding: 0px 0.4em; color: rgb(127, 127, 127); --darkreader-inline-color:#9a9181;" data-darkreader-inline-color="">22
</span></code></pre></td><td style="vertical-align: top; padding: 0px; margin: 0px; border: 0px; width: 100%; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><pre style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); tab-size: 4; --darkreader-inline-color:#f2f2de; --darkreader-inline-bgcolor:#121415;" data-darkreader-inline-color="" data-darkreader-inline-bgcolor=""><code class="language-bash" data-lang="bash">$ pipenv
Failed to import the site module
Traceback <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>most recent call last<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>:
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site.py"</span>, line 544, in &lt;module&gt;
    main<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">()</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site.py"</span>, line 530, in main
    known_paths <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span> addusersitepackages<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>known_paths<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site.py"</span>, line 282, in addusersitepackages
    user_site <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span> getusersitepackages<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">()</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site.py"</span>, line 258, in getusersitepackages
    user_base <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span> getuserbase<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">()</span> <span style="color: rgb(117, 113, 94); --darkreader-inline-color:#a9a194;" data-darkreader-inline-color=""># this will also set USER_BASE</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site.py"</span>, line 248, in getuserbase
    USER_BASE <span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">=</span> get_config_var<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span><span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">'userbase'</span><span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/sysconfig.py"</span>, line 601, in get_config_var
    <span style="color: rgb(102, 217, 239); --darkreader-inline-color:#63e2fa;" data-darkreader-inline-color="">return</span> get_config_vars<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">()</span>.get<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>name<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/sysconfig.py"</span>, line 580, in get_config_vars
    import _osx_support
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/_osx_support.py"</span>, line 4, in &lt;module&gt;
    import re
  File <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">"/usr/local/Cellar/python3/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/re.py"</span>, line 142, in &lt;module&gt;
    class RegexFlag<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">(</span>enum.IntFlag<span style="color: rgb(249, 38, 114); --darkreader-inline-color:#ff2e7c;" data-darkreader-inline-color="">)</span>:
AttributeError: module <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">'enum'</span> has no attribute <span style="color: rgb(230, 219, 116); --darkreader-inline-color:#f0e471;" data-darkreader-inline-color="">'IntFlag'</span>
</code></pre></td></tr></tbody></table>

是因为在项目目录里运行`pipenv`命令时，项目虚拟环境的python版本低于`3.6.4`, 由于`IntFlag`是从`python3.6.4`才开始集成到python内置模块的。当激活了项目的虚拟环境之后, 环境变量`PYTHONPATH`会被设置为当前虚拟环境的`site-packages`目录，因此`pipenv`依赖的`IntFlag`无法找到。 解决办法是在运行`pipenv`时设置环境变量`PYTHONPATH`为空
```
$ PYTHONPATH= pipenv
```